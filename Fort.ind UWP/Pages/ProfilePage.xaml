<Page
    x:Class="Fort.ind_UWP.ProfilePage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Fort.ind_UWP"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Background="Transparent">

    <Page.Resources>
        <AcrylicBrush x:Key="CardAcrylicBrush"
                      BackgroundSource="Backdrop"
                      TintColor="#2d2d44"
                      TintOpacity="0.6"
                      FallbackColor="#2d2d44"/>
    </Page.Resources>

    <ScrollViewer>
        <StackPanel Padding="24" MaxWidth="600">
            
            <!-- Not Logged In State -->
            <StackPanel x:Name="NotLoggedInPanel" Visibility="Collapsed">
                <Grid Background="{StaticResource CardAcrylicBrush}"
                      CornerRadius="8"
                      Padding="24">
                    <StackPanel HorizontalAlignment="Center" Spacing="16">
                        <TextBlock Text="??" 
                                   FontSize="48" 
                                   HorizontalAlignment="Center"/>
                        <TextBlock Text="Not signed in"
                                   FontSize="20"
                                   FontWeight="SemiBold"
                                   HorizontalAlignment="Center"/>
                        <TextBlock Text="Sign in to access your profile and sync your data"
                                   TextWrapping="Wrap"
                                   TextAlignment="Center"
                                   Opacity="0.7"/>
                        <Button x:Name="SignInButton"
                                Content="Sign In"
                                HorizontalAlignment="Center"
                                Click="SignInButton_Click"
                                Style="{StaticResource AccentButtonStyle}"/>
                    </StackPanel>
                </Grid>
            </StackPanel>

            <!-- Logged In State -->
            <StackPanel x:Name="LoggedInPanel" Spacing="16">
                
                <!-- Profile Header -->
                <Grid Background="{StaticResource CardAcrylicBrush}"
                      CornerRadius="8"
                      Padding="24">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Profile Picture -->
                    <Grid Width="80" Height="80" 
                          CornerRadius="40"
                          Background="#3d3d5c">
                        <TextBlock x:Name="ProfileInitials"
                                   Text="?"
                                   FontSize="32"
                                   FontWeight="Bold"
                                   HorizontalAlignment="Center"
                                   VerticalAlignment="Center"/>
                    </Grid>

                    <!-- Profile Info -->
                    <StackPanel Grid.Column="1" Margin="16,0,0,0" VerticalAlignment="Center">
                        <TextBlock x:Name="DisplayNameText"
                                   Text="Display Name"
                                   FontSize="24"
                                   FontWeight="Bold"/>
                        <TextBlock x:Name="UsernameText"
                                   Text="@username"
                                   FontSize="14"
                                   Opacity="0.7"/>
                        <TextBlock x:Name="MemberSinceText"
                                   Text="Member since..."
                                   FontSize="12"
                                   Opacity="0.5"
                                   Margin="0,4,0,0"/>
                    </StackPanel>
                </Grid>

                <!-- View Mode -->
                <StackPanel x:Name="ViewModePanel" Spacing="16">
                    
                    <!-- Bio Section -->
                    <Grid Background="{StaticResource CardAcrylicBrush}"
                          CornerRadius="8"
                          Padding="20">
                        <StackPanel>
                            <TextBlock Text="About"
                                       FontSize="16"
                                       FontWeight="SemiBold"
                                       Margin="0,0,0,8"/>
                            <TextBlock x:Name="BioText"
                                       Text="No bio yet"
                                       TextWrapping="Wrap"
                                       Opacity="0.8"/>
                        </StackPanel>
                    </Grid>

                    <!-- Contact Info -->
                    <Grid Background="{StaticResource CardAcrylicBrush}"
                          CornerRadius="8"
                          Padding="20">
                        <StackPanel Spacing="12">
                            <TextBlock Text="Contact"
                                       FontSize="16"
                                       FontWeight="SemiBold"/>
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <TextBlock Text="??" FontSize="16"/>
                                <TextBlock x:Name="EmailText" 
                                           Text="No email set"
                                           Opacity="0.8"/>
                            </StackPanel>
                        </StackPanel>
                    </Grid>

                    <!-- Actions -->
                    <StackPanel Orientation="Horizontal" Spacing="12">
                        <Button x:Name="EditProfileButton"
                                Content="?? Edit Profile"
                                Click="EditProfileButton_Click"/>
                        <Button x:Name="LogoutButton"
                                Content="?? Sign Out"
                                Click="LogoutButton_Click"/>
                    </StackPanel>
                </StackPanel>

                <!-- Edit Mode -->
                <StackPanel x:Name="EditModePanel" Spacing="16" Visibility="Collapsed">
                    
                    <Grid Background="{StaticResource CardAcrylicBrush}"
                          CornerRadius="8"
                          Padding="20">
                        <StackPanel Spacing="16">
                            <TextBlock Text="Edit Profile"
                                       FontSize="18"
                                       FontWeight="SemiBold"/>

                            <StackPanel Spacing="4">
                                <TextBlock Text="Display Name" FontSize="12" Opacity="0.7"/>
                                <TextBox x:Name="EditDisplayNameBox"/>
                            </StackPanel>

                            <StackPanel Spacing="4">
                                <TextBlock Text="Email" FontSize="12" Opacity="0.7"/>
                                <TextBox x:Name="EditEmailBox"/>
                            </StackPanel>

                            <StackPanel Spacing="4">
                                <TextBlock Text="Bio" FontSize="12" Opacity="0.7"/>
                                <TextBox x:Name="EditBioBox"
                                         AcceptsReturn="True"
                                         TextWrapping="Wrap"
                                         MinHeight="100"/>
                            </StackPanel>

                            <TextBlock x:Name="EditErrorText"
                                       Foreground="#FF6B6B"
                                       FontSize="12"
                                       Visibility="Collapsed"/>

                            <StackPanel Orientation="Horizontal" Spacing="12">
                                <Button x:Name="SaveProfileButton"
                                        Content="Save Changes"
                                        Click="SaveProfileButton_Click"
                                        Style="{StaticResource AccentButtonStyle}"/>
                                <Button x:Name="CancelEditButton"
                                        Content="Cancel"
                                        Click="CancelEditButton_Click"/>
                            </StackPanel>
                        </StackPanel>
                    </Grid>

                    <!-- Change Password Section -->
                    <Grid Background="{StaticResource CardAcrylicBrush}"
                          CornerRadius="8"
                          Padding="20">
                        <StackPanel Spacing="16">
                            <TextBlock Text="Change Password"
                                       FontSize="18"
                                       FontWeight="SemiBold"/>

                            <StackPanel Spacing="4">
                                <TextBlock Text="Current Password" FontSize="12" Opacity="0.7"/>
                                <PasswordBox x:Name="CurrentPasswordBox"/>
                            </StackPanel>

                            <StackPanel Spacing="4">
                                <TextBlock Text="New Password" FontSize="12" Opacity="0.7"/>
                                <PasswordBox x:Name="NewPasswordBox"/>
                            </StackPanel>

                            <StackPanel Spacing="4">
                                <TextBlock Text="Confirm New Password" FontSize="12" Opacity="0.7"/>
                                <PasswordBox x:Name="ConfirmNewPasswordBox"/>
                            </StackPanel>

                            <TextBlock x:Name="PasswordErrorText"
                                       Foreground="#FF6B6B"
                                       FontSize="12"
                                       Visibility="Collapsed"/>

                            <Button x:Name="ChangePasswordButton"
                                    Content="Update Password"
                                    Click="ChangePasswordButton_Click"/>
                        </StackPanel>
                    </Grid>

                    <!-- Danger Zone -->
                    <Grid Background="#402d2d"
                          CornerRadius="8"
                          Padding="20">
                        <StackPanel Spacing="12">
                            <TextBlock Text="?? Danger Zone"
                                       FontSize="16"
                                       FontWeight="SemiBold"
                                       Foreground="#FF6B6B"/>
                            <TextBlock Text="Deleting your account is permanent and cannot be undone."
                                       TextWrapping="Wrap"
                                       Opacity="0.7"/>
                            <Button x:Name="DeleteAccountButton"
                                    Content="Delete Account"
                                    Background="#803030"
                                    Click="DeleteAccountButton_Click"/>
                        </StackPanel>
                    </Grid>
                </StackPanel>
            </StackPanel>
        </StackPanel>
    </ScrollViewer>
</Page>
